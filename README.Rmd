---
output: github_document
---

<!-- Render README.Rmd. Then open README.md and use VS Code (Markdown All in One) to create/update TOC. -->

```{r, include=FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  echo = FALSE
)
```

# r-windows-paths

Essential R command-line tool paths on Windows.
This information can help setting up the `PATH` environment variable
for seamless command-line access.

## Contents

## Example versions

Some of the paths below are specific to the installed software version.
We use these software version examples:

```{r}
str_extract_first <- function(x, pattern) {
  m <- regexec(pattern, text = x, perl = TRUE)
  regmatches(x, m = m)[[1]][2]
}

get_r_version <- function() {
  "http://cran.r-project.org/src/base/VERSION-INFO.dcf" |>
    url() |>
    read.dcf() |>
    as.data.frame() |>
    getElement(name = "Release")
}

get_rtools_version <- function() {
  version_string <- "https://raw.githubusercontent.com/r-windows/rtools-chocolatey/master/src/rtools.nuspec" |>
    curl::curl_fetch_memory() |>
    getElement(name = "content") |>
    rawToChar() |>
    str_extract_first(pattern = "<version>(.*?)</version>")

  parts <- strsplit(version_string, "\\.")[[1]]
  paste0(parts[1], parts[2])
}

get_rstudio_version <- function() {
  version_string <- "http://download1.rstudio.org/current.ver" |>
    curl::curl_fetch_memory() |>
    getElement(name = "content") |>
    rawToChar()

  parts <- strsplit(trimws(version_string), "\\+")[[1]]
  major <- parts[1]
  minor <- strsplit(parts[2], "\\.")[[1]][1]
  list(major = major, minor = minor)
}

r_version <- get_r_version()
rtools_version <- get_rtools_version()
rstudio_version <- get_rstudio_version()
rstudio_version_major <- rstudio_version$major
rstudio_version_minor <- rstudio_version$minor
```

- R `r r_version`
- Rtools`r rtools_version`
- RStudio Desktop `r sprintf("%s+%s", rstudio_version_major, rstudio_version_minor)`

## Key paths

### R

`R.exe` and `Rscript.exe`.

R release version `r r_version`:

```batchfile
C:\Program Files\R\R-`r r_version`\bin
```

R-devel:

```batchfile
C:\Program Files\R\R-devel\bin
```

### Rtools

C/C++/Fortran toolchain for building R and R packages from source.

Contains `gcc`, `g++`, `gfortran`:

```batchfile
C:\rtools`r rtools_version`\x86_64-w64-mingw32.static.posix\bin
```

Contains Texinfo (`texi2dvi`, `texi2pdf`) required by `R CMD check`:

```batchfile
C:\rtools`r rtools_version`\usr\bin
```

### Pandoc

pandoc installed via `choco install pandoc`:

```batchfile
C:\Users\%USERNAME%\AppData\Local\Pandoc
```

pandoc distributed with RStudio Desktop:

```batchfile
C:\Users\%USERNAME%\RStudio-`r sprintf("%s-%s", rstudio_version_major, rstudio_version_minor)`\resources\app\bin\quarto\bin\tools
```

pandoc distributed with Quarto standalone installer:

```batchfile
C:\Users\%USERNAME%\AppData\Local\Programs\Quarto\bin\tools
```

### TinyTeX

TeX distribution binaries for LaTeX support.
Contains `pdflatex` required by `R CMD check`.

```batchfile
C:\Users\%USERNAME%\AppData\Roaming\TinyTeX\bin\windows
```

### Quarto

Quarto installed via `choco install quarto`:

```batchfile
C:\ProgramData\chocolatey\lib\quarto\tools\bin
```

Quarto distributed with RStudio Desktop:

```batchfile
C:\Users\%USERNAME%\RStudio-`r sprintf("%s-%s", rstudio_version_major, rstudio_version_minor)`\resources\app\bin\quarto\bin
```

Quarto distributed via Quarto standalone installer:

```batchfile
C:\Users\%USERNAME%\AppData\Local\Programs\Quarto\bin
```

## Configure and verify

1. Locate the paths on your system.
   - Open File Explorer and navigate to the directories listed above.
   - Verify that the paths exist and contain the expected executables.
1. Add relevant paths to your system's `PATH` environment variable
   and verify the setup.
   - For a step-by-step guide with screenshots, see
     [how to set the `PATH` environment variable in Windows](path.md).

Now you should be able to use R and its associated tools from the CLI
without specifying full paths.
